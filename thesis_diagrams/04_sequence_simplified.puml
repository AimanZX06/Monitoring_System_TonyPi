@startuml Sequence Diagram - Robot Monitoring Flow
!theme plain
skinparam sequence {
    ArrowColor #333333
    LifeLineBorderColor #333333
    ParticipantBackgroundColor White
}

title TonyPi Monitoring - Real-time Data Flow

actor User #LightBlue
participant "React\nFrontend" as FE #LightBlue
participant "FastAPI\nBackend" as BE #LightGreen
participant "MQTT\nBroker" as MQTT #LightCoral
participant "TonyPi\nRobot" as Robot #Orange
database "InfluxDB" as DB #LightYellow

== Real-time Telemetry Flow ==

Robot -> MQTT : publish(telemetry)
MQTT -> BE : on_message(telemetry)
BE -> DB : store(telemetry)
BE -> FE : WebSocket(update)
FE -> User : Display Dashboard

== Send Command to Robot ==

User -> FE : Click "Send Command"
FE -> BE : POST /command
BE -> MQTT : publish(command)
MQTT -> Robot : on_message(command)
Robot -> Robot : executeCommand()
Robot -> MQTT : publish(result)
MQTT -> BE : on_message(result)
BE -> FE : WebSocket(status)
FE -> User : Show Result

== View Camera Stream ==

User -> FE : Open Camera View
FE -> Robot : HTTP GET /stream
Robot --> FE : MJPEG Stream
FE -> User : Display Video

@enduml
