@startuml Deployment Diagram - TonyPi System
!theme plain
skinparam node {
    BackgroundColor White
    BorderColor #333333
}

title TonyPi Monitoring System - Deployment Diagram

' User Device
node "User Device" as UserDevice #LightBlue {
    component "Web Browser" as Browser
}

' Monitoring Server
node "Monitoring Server\n(Docker Host)" as Server #LightGreen {
    
    node "Frontend Container" as FEContainer #LightCyan {
        component "React App\n:3001" as React
    }
    
    node "Backend Container" as BEContainer #LightCyan {
        component "FastAPI\n:8000" as FastAPI
    }
    
    node "MQTT Container" as MQTTContainer #LightCoral {
        component "Mosquitto\n:1883" as Mosquitto
    }
    
    node "Database Containers" as DBContainer #LightYellow {
        database "PostgreSQL\n:5432" as Postgres
        database "InfluxDB\n:8086" as InfluxDB
    }
    
    node "Monitoring Container" as MonContainer #Pink {
        component "Grafana\n:3000" as Grafana
    }
}

' TonyPi Robot
node "TonyPi Robot\n(Raspberry Pi 5)" as TonyPi #Orange {
    component "Robot Client\n(Python)" as RobotClient
    component "Camera Server\n:8080" as Camera
    
    node "Hardware" as Hardware #Wheat {
        component "Servos" as Servos
        component "Sensors" as Sensors
        component "Camera" as Cam
    }
}

' Connections
Browser --> React : HTTPS
Browser --> Grafana : HTTPS
React --> FastAPI : HTTP/WS
FastAPI --> Mosquitto : MQTT
FastAPI --> Postgres : TCP
FastAPI --> InfluxDB : TCP
Grafana --> InfluxDB : TCP
RobotClient --> Mosquitto : MQTT
Browser --> Camera : HTTP Stream
RobotClient --> Hardware

@enduml
