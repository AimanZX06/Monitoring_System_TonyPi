@startuml State Diagram - TonyPi Robot States
skinparam state {
    BackgroundColor White
    BorderColor #333333
    ArrowColor #333333
}

title TonyPi Robot - State Diagram

[*] --> Disconnected

state "Disconnected" as Disconnected #LightGray
Disconnected : Robot not connected
Disconnected : No telemetry

state "Connected" as Connected #LightGreen {
    Connected : MQTT connection active
    Connected : Publishing telemetry
    
    state "Idle" as Idle #LightBlue
    Idle : Awaiting commands
    Idle : Sensors monitoring
    
    state "Executing Task" as Executing #Orange
    Executing : Processing command
    Executing : Movement in progress
    
    state "Streaming" as Streaming #LightCyan
    Streaming : Camera active
    Streaming : Vision processing
    
    state "Error" as Error #Pink
    Error : Hardware issue
    Error : Command failed
    
    [*] --> Idle
    Idle --> Executing : receive_command()
    Executing --> Idle : task_complete()
    Executing --> Error : task_failed()
    Error --> Idle : error_cleared()
    
    Idle --> Streaming : start_camera()
    Streaming --> Idle : stop_camera()
    
    Streaming --> Executing : detect_object()
    Executing --> Streaming : return_to_monitoring()
}

Disconnected --> Connected : mqtt_connect()
Connected --> Disconnected : connection_lost()
Connected --> Disconnected : shutdown()

@enduml
